---
http_interactions:
- request:
    method: get
    uri: http://localhost:6301/clusters/.demo-cluster/nodes
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.17.1
      Authorization:
      - "[REDACTED]"
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Accept-Encoding:
      - gzip,deflate
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/vnd.api+json
      Content-Length:
      - '10809'
    body:
      encoding: UTF-8
      string: |-
        {
          "data": [
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8a3",
              "attributes": {
                "name": "node1",
                "params": {
                  "platform": "demo",
                  "key": "node1",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": false,
                  "ip": "10.10.0.1"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8a3"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a3/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a3/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a3/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a3/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a3/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a3/cascades"
                  }
                }
              }
            },
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8a4",
              "attributes": {
                "name": "node2",
                "params": {
                  "platform": "demo",
                  "key": "node2",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": true,
                  "ip": "10.10.0.2"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8a4"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a4/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a4/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a4/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a4/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a4/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a4/cascades"
                  }
                }
              }
            },
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8a5",
              "attributes": {
                "name": "node3",
                "params": {
                  "platform": "demo",
                  "key": "node3",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": false,
                  "ip": "10.10.0.3"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8a5"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a5/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a5/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a5/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a5/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a5/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a5/cascades"
                  }
                }
              }
            },
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8a6",
              "attributes": {
                "name": "node4",
                "params": {
                  "platform": "demo",
                  "key": "node4",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": true,
                  "ip": "10.10.0.4"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8a6"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a6/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a6/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a6/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a6/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a6/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a6/cascades"
                  }
                }
              }
            },
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8a7",
              "attributes": {
                "name": "node5",
                "params": {
                  "platform": "demo",
                  "key": "node5",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": false,
                  "ip": "10.10.0.5"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8a7"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a7/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a7/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a7/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a7/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a7/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a7/cascades"
                  }
                }
              }
            },
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8a8",
              "attributes": {
                "name": "node6",
                "params": {
                  "platform": "demo",
                  "key": "node6",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": true,
                  "ip": "10.10.0.6"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8a8"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a8/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a8/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a8/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a8/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a8/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a8/cascades"
                  }
                }
              }
            },
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8a9",
              "attributes": {
                "name": "node7",
                "params": {
                  "platform": "demo",
                  "key": "node7",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": false,
                  "ip": "10.10.0.7"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8a9"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a9/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a9/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a9/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a9/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8a9/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8a9/cascades"
                  }
                }
              }
            },
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8aa",
              "attributes": {
                "name": "node8",
                "params": {
                  "platform": "demo",
                  "key": "node8",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": true,
                  "ip": "10.10.0.8"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8aa"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8aa/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8aa/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8aa/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8aa/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8aa/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8aa/cascades"
                  }
                }
              }
            },
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8ab",
              "attributes": {
                "name": "node9",
                "params": {
                  "platform": "demo",
                  "key": "node9",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": false,
                  "ip": "10.10.0.9"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8ab"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8ab/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8ab/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8ab/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8ab/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8ab/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8ab/cascades"
                  }
                }
              }
            },
            {
              "type": "nodes",
              "id": "5dfd09cde1382365ad3cd8ac",
              "attributes": {
                "name": "node10",
                "params": {
                  "platform": "demo",
                  "key": "node10",
                  "cluster": "demo-cluster",
                  "subnet": "10.10.0.0/24",
                  "even": true,
                  "ip": "10.10.0.10"
                }
              },
              "links": {
                "self": "/nodes/5dfd09cde1382365ad3cd8ac"
              },
              "relationships": {
                "cluster": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8ac/relationships/cluster",
                    "related": "/nodes/5dfd09cde1382365ad3cd8ac/cluster"
                  }
                },
                "groups": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8ac/relationships/groups",
                    "related": "/nodes/5dfd09cde1382365ad3cd8ac/groups"
                  }
                },
                "cascades": {
                  "links": {
                    "self": "/nodes/5dfd09cde1382365ad3cd8ac/relationships/cascades",
                    "related": "/nodes/5dfd09cde1382365ad3cd8ac/cascades"
                  }
                }
              }
            }
          ],
          "jsonapi": {
            "version": "1.0"
          },
          "included": [

          ]
        }
    http_version: 
  recorded_at: Mon, 23 Dec 2019 12:37:21 GMT
- request:
    method: get
    uri: http://localhost:6301/nodes/demo-cluster.node1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.17.1
      Authorization:
      - "[REDACTED]"
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Accept-Encoding:
      - gzip,deflate
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/vnd.api+json
      Content-Length:
      - '1070'
    body:
      encoding: UTF-8
      string: |-
        {
          "data": {
            "type": "nodes",
            "id": "5dfd09cde1382365ad3cd8a3",
            "attributes": {
              "name": "node1",
              "params": {
                "platform": "demo",
                "key": "node1",
                "cluster": "demo-cluster",
                "subnet": "10.10.0.0/24",
                "even": false,
                "ip": "10.10.0.1"
              }
            },
            "links": {
              "self": "/nodes/5dfd09cde1382365ad3cd8a3"
            },
            "relationships": {
              "cluster": {
                "links": {
                  "self": "/nodes/5dfd09cde1382365ad3cd8a3/relationships/cluster",
                  "related": "/nodes/5dfd09cde1382365ad3cd8a3/cluster"
                }
              },
              "groups": {
                "links": {
                  "self": "/nodes/5dfd09cde1382365ad3cd8a3/relationships/groups",
                  "related": "/nodes/5dfd09cde1382365ad3cd8a3/groups"
                }
              },
              "cascades": {
                "links": {
                  "self": "/nodes/5dfd09cde1382365ad3cd8a3/relationships/cascades",
                  "related": "/nodes/5dfd09cde1382365ad3cd8a3/cascades"
                }
              }
            }
          },
          "jsonapi": {
            "version": "1.0"
          },
          "included": [

          ]
        }
    http_version: 
  recorded_at: Mon, 23 Dec 2019 12:37:21 GMT
- request:
    method: get
    uri: http://localhost:6301/nodes/demo-cluster.missing
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - Faraday v0.17.1
      Authorization:
      - "[REDACTED]"
      Content-Type:
      - application/vnd.api+json
      Accept:
      - application/vnd.api+json
      Accept-Encoding:
      - gzip,deflate
  response:
    status:
      code: 404
      message: Not Found
    headers:
      Content-Type:
      - application/vnd.api+json
      X-Cascade:
      - pass
      Content-Length:
      - '777'
    body:
      encoding: UTF-8
      string: |-
        {
          "errors": [
            {
              "id": "93aef42f-b611-44f4-bf7d-d119564b320a",
              "title": "Not Found Error",
              "detail": "\nmessage:\n  Document not found for class Node with attributes {:cluster=>#<Cluster _id: 5dfd09cde1382365ad3cd8a2, level_params: {\"platform\"=>\"demo\", \"key\"=>\"cluster\", \"cluster\"=>\"demo-cluster\"}, name: \"demo-cluster\">, :name=>\"missing\"}.\nsummary:\n  When calling Node.find_by with a hash of attributes, all attributes provided must match a document in the database or this error will be raised.\nresolution:\n  Search for attributes that are in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause a nil to be returned instead of raising this error.",
              "status": "404"
            }
          ]
        }
    http_version: 
  recorded_at: Mon, 23 Dec 2019 12:47:09 GMT
recorded_with: VCR 5.0.0
